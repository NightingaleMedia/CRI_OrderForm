<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="file" id="upload">
    <label for="upload">Upload File</label>

    <button id="submit">Submit</button>


    <script>

        const submit = document.querySelector('#submit')
           const upload = document.getElementById('upload')

            let path = '';

            const fReader = new FileReader()
    
            upload.onchange = function(e){ 
                console.log('uploaded')
                fReader.readAsDataURL(upload.files[0])
            }

            fReader.onloadend = function(e) {
        
                path = (e.target.result)
            
                // submit.style.backgroundColor = 'blue';
            }


        
        submit.addEventListener('click', function(){
            console.log(path)
            const pw = 'cs_be5fdc4a026c0907746e421f532e5339785492f1';
            const login = 'ck_af44e6bb12c2be4c41f605d8dd22e78686cc36d5';

            const api_url = 'https://cleanlites.dev.local/wp-json/gf/v2/forms/13'

         


            const h = new Headers();
            h.append("Authorization", "Basic " + btoa(`${login}:${pw}`).toString("base64"));
            h.append("Content-Type", "application/json; charset=utf-8;");

                const formData = {
                    "form_id": "13",
                    "input_1": path,
                    "input_2": "testing3"
                }
           
                //  console.log('submit form')
                let uri = `${api_url}/submissions`;
                fetch(uri, {
                    headers: h,
                    method: "POST",
                    body: JSON.stringify(formData)

                })
                    .then(result => result.json())
                    .then(res => console.log(res))
                  
            
        })

    </script>
</body>
</html>